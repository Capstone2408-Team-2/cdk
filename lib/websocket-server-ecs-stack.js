"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WebSocketServerStack = void 0;
const cdk = require("aws-cdk-lib");
const Elasticache_1 = require("./Elasticache");
const ec2 = require("aws-cdk-lib/aws-ec2");
const LoadBalancedApplication_1 = require("./LoadBalancedApplication");
class WebSocketServerStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const vpc = new ec2.Vpc(this, "WebSocketServer-Vpc", {
            maxAzs: 2,
            natGateways: 1,
        });
        const elasticache = new Elasticache_1.Elasticache(this, "elasticache", vpc);
        new LoadBalancedApplication_1.LoadBalancedApplication(this, "ALB", vpc, elasticache);
    }
}
exports.WebSocketServerStack = WebSocketServerStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vic29ja2V0LXNlcnZlci1lY3Mtc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJzb2NrZXQtc2VydmVyLWVjcy1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxtQ0FBbUM7QUFFbkMsK0NBQTRDO0FBQzVDLDJDQUEyQztBQUMzQyx1RUFBb0U7QUFFcEUsTUFBYSxvQkFBcUIsU0FBUSxHQUFHLENBQUMsS0FBSztJQUNqRCxZQUFZLEtBQWdCLEVBQUUsRUFBVSxFQUFFLEtBQXNCO1FBQzlELEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXhCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUU7WUFDbkQsTUFBTSxFQUFFLENBQUM7WUFDVCxXQUFXLEVBQUUsQ0FBQztTQUNmLENBQUMsQ0FBQztRQUVILE1BQU0sV0FBVyxHQUFHLElBQUkseUJBQVcsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRTlELElBQUksaURBQXVCLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDN0QsQ0FBQztDQUNGO0FBYkQsb0RBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xuaW1wb3J0IHsgRWxhc3RpY2FjaGUgfSBmcm9tIFwiLi9FbGFzdGljYWNoZVwiO1xuaW1wb3J0ICogYXMgZWMyIGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtZWMyXCI7XG5pbXBvcnQgeyBMb2FkQmFsYW5jZWRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL0xvYWRCYWxhbmNlZEFwcGxpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRTZXJ2ZXJTdGFjayBleHRlbmRzIGNkay5TdGFjayB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzPzogY2RrLlN0YWNrUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcblxuICAgIGNvbnN0IHZwYyA9IG5ldyBlYzIuVnBjKHRoaXMsIFwiV2ViU29ja2V0U2VydmVyLVZwY1wiLCB7XG4gICAgICBtYXhBenM6IDIsXG4gICAgICBuYXRHYXRld2F5czogMSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGVsYXN0aWNhY2hlID0gbmV3IEVsYXN0aWNhY2hlKHRoaXMsIFwiZWxhc3RpY2FjaGVcIiwgdnBjKTtcblxuICAgIG5ldyBMb2FkQmFsYW5jZWRBcHBsaWNhdGlvbih0aGlzLCBcIkFMQlwiLCB2cGMsIGVsYXN0aWNhY2hlKTtcbiAgfVxufVxuIl19